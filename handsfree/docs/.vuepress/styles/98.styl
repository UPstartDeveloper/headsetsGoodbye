// @see https://jdan.github.io/98.css/
:root
  --surface #c0c0c0
  --button-highlight #ffffff
  --button-face #dfdfdf
  --button-shadow #808080
  --window-frame #0a0a0a
  --dialog-blue #000080
  --dialog-blue-light #1084d0
  --dialog-gray #808080
  --dialog-gray-light #b5b5b5
  --link-blue #0000ff
  --element-spacing 8px
  --grouped-button-spacing 4px
  --grouped-element-spacing 6px
  --radio-width 12px
  --checkbox-width 13px
  --radio-label-spacing 6px
  --range-track-height 4px
  --range-spacing 10px
  --radio-total-width-precalc calc(var(--radio-width) + var(--radio-label-spacing))
  --radio-total-width calc(var(--radio-total-width-precalc))
  --radio-left calc(-1 * var(--radio-total-width-precalc))
  --radio-dot-width 4px
  --radio-dot-top calc(var(--radio-width) / 2 - var(--radio-dot-width) / 2)
  --radio-dot-left calc(
    -1 * (var(--radio-total-width-precalc)) + var(--radio-width) / 2 - var(
        --radio-dot-width
      ) / 2
  )
  --checkbox-total-width-precalc var(--checkbox-width) +
    var(--radio-label-spacing)
  --checkbox-total-width calc(var(--checkbox-total-width-precalc))
  --checkbox-left calc(-1 * var(--checkbox-total-width-precalc))
  --checkmark-width 7px
  --checkmark-top 3px
  --checkmark-left 3px
  --border-width 1px
  --border-raised-outer inset -1px -1px var(--window-frame),
    inset 1px 1px var(--button-highlight)
  --border-raised-inner inset -2px -2px var(--button-shadow),
    inset 2px 2px var(--button-face)
  --border-sunken-outer inset -1px -1px var(--button-highlight),
    inset 1px 1px var(--window-frame)
  --border-sunken-inner inset -2px -2px var(--button-face),
    inset 2px 2px var(--button-shadow)
  --border-window-outer inset -1px -1px var(--window-frame),
    inset 1px 1px var(--button-face)
  --border-window-inner inset -2px -2px var(--button-shadow),
    inset 2px 2px var(--button-highlight)
  --border-field inset -1px -1px var(--button-highlight),
    inset 1px 1px var(--button-shadow), inset -2px -2px var(--button-face),
    inset 2px 2px var(--window-frame)

  /* Tabs */
  --border-tab: inset -1px 0 var(--window-frame),
    inset 1px 1px var(--button-face),
    inset -2px 0 var(--button-shadow),
    inset 2px 2px var(--button-highlight)
    
html
  body
    color $color

  button,
  label,
  input,
  textarea,
  select,
  option,
  ul.tree-view,
  .sidebar > ul.sidebar-links,
  .window,
  .title-bar
    -webkit-font-smoothing none

  u
    text-decoration none
    border-bottom 0.5px solid #222222

  button
    box-sizing border-box
    border none
    background var(--surface)
    box-shadow var(--border-raised-outer), var(--border-raised-inner)
    border-radius 0
    min-width 75px
    min-height 23px
    padding 0 12px
    &:not(:disabled):active
      box-shadow var(--border-sunken-outer), var(--border-sunken-inner)
      padding 2px 11px 0 13px
    &:focus
      outline 1px dotted #000000
      outline-offset -4px
    &::-moz-focus-inner
      border 0

  .vertical-bar
    width 4px
    height 20px
    background #c0c0c0
    box-shadow var(--border-raised-outer), var(--border-raised-inner)

@media (hover: none)
  html
    button
      &:not(:disabled):hover
        box-shadow var(--border-sunken-outer), var(--border-sunken-inner)

html
  :disabled,
  :disabled + label
    color var(--button-shadow)
    text-shadow 1px 1px 0 var(--button-highlight)

  .window
    box-shadow var(--border-window-outer), var(--border-window-inner)
    background var(--surface)
    padding 3px

  .title-bar
    background linear-gradient(
      90deg,
      var(--dialog-blue),
      var(--dialog-blue-light)
    )
    padding 3px 2px 3px 3px
    display flex
    justify-content space-between
    align-items center
    &.inactive
      background linear-gradient(
      90deg,
      var(--dialog-gray),
      var(--dialog-gray-light)
    )

  .title-bar-text
    font-weight bold
    color white
    letter-spacing 0
    margin-right 24px

  .title-bar-controls
    display flex
    button
      padding 0
      display block
      min-width 16px
      min-height 14px
      &:active
        padding 0
      &:focus
        outline none
    button[aria-label="Minimize"]
      background-image url("/icon/minimize.svg")
      background-repeat no-repeat
      background-position bottom 3px left 4px
    button[aria-label="Maximize"]
      background-image url("/icon/maximize.svg")
      background-repeat no-repeat
      background-position top 2px left 3px
    button[aria-label="Restore"]
      background-image url("/icon/restore.svg")
      background-repeat no-repeat
      background-position top 2px left 3px
    button[aria-label="Help"]
      background-image url("/icon/help.svg")
      background-repeat no-repeat
      background-position top 2px left 5px
    button[aria-label="Close"]
      margin-left 2px
      background-image url("/icon/close.svg")
      background-repeat no-repeat
      background-position top 3px left 4px

  .window-body
    margin var(--element-spacing)

  fieldset
    border none
    box-shadow inset -1px -1px var(--button-highlight), inset -2px 1px var(--button-shadow),
      inset 1px -2px var(--button-shadow), inset 2px 2px var(--button-highlight)
    padding calc(2 * var(--border-width) + var(--element-spacing))
    padding-block-start var(--element-spacing)
    margin 0

  legend
    background var(--surface)

  .field-row
    display flex
    align-items center
    & > *
      & + *
        margin-left var(--grouped-element-spacing)

  [class^="field-row"]
    & + [class^="field-row"]
      margin-top var(--grouped-element-spacing)

  .field-row-stacked
    display flex
    flex-direction column
    *
      & + *
        margin-top var(--grouped-element-spacing)

  label
    display inline-flex
    align-items center

  input[type="radio"],
  input[type="checkbox"]
    appearance none
    -webkit-appearance none
    -moz-appearance none
    margin 0
    background 0
    position fixed
    opacity 0
    border none

  input[type="radio"] + label,
  input[type="checkbox"] + label
    line-height 13px

  input[type="radio"]
    & + label
      position relative
      margin-left var(--radio-total-width)
      &::before
        content ""
        position absolute
        top 0
        left calc(-1 * (var(--radio-total-width-precalc)))
        display inline-block
        width var(--radio-width)
        height var(--radio-width)
        margin-right var(--radio-label-spacing)
        background url("/icon/radio-border.svg")

  input[type="radio"]:active
    & + label
      &::before
        background url("/icon/radio-border-disabled.svg")

  input[type="radio"]:checked
    & + label
      &::after
        content ""
        display block
        width var(--radio-dot-width)
        height var(--radio-dot-width)
        top var(--radio-dot-top)
        left var(--radio-dot-left)
        position absolute
        background url("/icon/radio-dot.svg")

  input[type="radio"]:focus + label,
  input[type="checkbox"]:focus + label
    outline 1px dotted #000000

  input[type="radio"][disabled]
    & + label
      &::before
        background url("/icon/radio-border-disabled.svg")

  input[type="radio"][disabled]:checked
    & + label
      &::after
        background url("/icon/radio-dot-disabled.svg")

  input[type="checkbox"]
    & + label
      position relative
      margin-left var(--checkbox-total-width)
      &::before
        content ""
        position relative
        left calc(-1 * (var(--checkbox-total-width-precalc)))
        display inline-block
        width var(--checkbox-width)
        height var(--checkbox-width)
        background var(--button-highlight)
        box-shadow var(--border-field)
        margin-right var(--radio-label-spacing)

  input[type="checkbox"]:active
    & + label
      &::before
        background var(--surface)

  input[type="checkbox"]:checked
    & + label
      &::after
        content ""
        display block
        width var(--checkmark-width)
        height var(--checkmark-width)
        position absolute
        top var(--checkmark-top)
        left calc(-1 * (var(--checkbox-total-width-precalc)) + var(--checkmark-left) + 4px)
        left 3px
        background url("/icon/checkmark.svg")

  input[type="checkbox"][disabled]
    & + label
      &::before
        background var(--surface)

  input[type="checkbox"][disabled]:checked
    & + label
      &::after
        background url("/icon/checkmark-disabled.svg")

  input[aria-label="Search"],
  input[type="text"],
  input[type="password"],
  input[type="email"],
  select,
  textarea
    padding 3px 4px
    border none
    box-shadow var(--border-field)
    background-color var(--button-highlight)
    box-sizing border-box
    -webkit-appearance none
    -moz-appearance none
    appearance none
    border-radius 0

  input[aria-label="Search"],
  input[type="text"],
  input[type="password"],
  input[type="email"],
  select
    height 2em

  input[aria-label="Search"],
  input[type="text"],
  input[type="password"],
  input[type="email"]
    line-height 2

  select
    appearance none
    -webkit-appearance none
    -moz-appearance none
    position relative
    padding-right 32px
    background-image url("/icon/button-down.svg")
    background-position top 2px right 2px
    background-repeat no-repeat
    border-radius 0
    &:focus
      color var(--button-highlight)
      background-color var(--dialog-blue)
      option
        color #000
        background-color #fff
    &:active
      background-image url("/icon/button-down-active.svg")

  select:focus,
  input[aria-label="Search"]:focus,
  input[type="text"]:focus,
  input[type="password"]:focus,
  input[type="email"]:focus,
  textarea:focus
    outline none

  input[type="range"]
    -webkit-appearance none
    width 100%
    background transparent

  input[type="range"]:focus
    outline none

  input[type="range"]::-webkit-slider-thumb
    -webkit-appearance none
    height 21px
    width 11px
    background url("/icon/indicator-horizontal.svg")
    transform translateY(-8px)

  input[type="range"].has-box-indicator
    &::-webkit-slider-thumb
      background url("/icon/indicator-rectangle-horizontal.svg")
      transform translateY(-10px)
    &::-moz-range-thumb
      background url("/icon/indicator-rectangle-horizontal.svg")
      transform translateY(0px)

  input[type="range"]::-moz-range-thumb
    height 21px
    width 11px
    border 0
    border-radius 0
    background url("/icon/indicator-horizontal.svg")
    transform translateY(2px)

  input[type="range"]::-webkit-slider-runnable-track
    width 100%
    height 2px
    box-sizing border-box
    background black
    border-right 1px solid grey
    border-bottom 1px solid grey
    box-shadow 1px 0 0 white, 1px 1px 0 white, 0 1px 0 white, -1px 0 0 darkgrey,
      -1px -1px 0 darkgrey, 0 -1px 0 darkgrey, -1px 1px 0 white, 1px -1px darkgrey

  input[type="range"]::-moz-range-track
    width 100%
    height 2px
    box-sizing border-box
    background black
    border-right 1px solid grey
    border-bottom 1px solid grey
    box-shadow 1px 0 0 white, 1px 1px 0 white, 0 1px 0 white, -1px 0 0 darkgrey,
      -1px -1px 0 darkgrey, 0 -1px 0 darkgrey, -1px 1px 0 white, 1px -1px darkgrey

  .is-vertical
    display inline-block
    width 4px
    height 150px
    transform translateY(50%)
    & > input[type="range"]
      width 150px
      height 4px
      margin 0 calc(var(--grouped-element-spacing) + var(--range-spacing)) 0
      var(--range-spacing)
      transform-origin left
      transform rotate(270deg) translateX(calc(-50% + var(--element-spacing)))
    & > input[type="range"]::-webkit-slider-runnable-track
      border-left 1px solid grey
      border-right 0
      border-bottom 1px solid grey
      box-shadow -1px 0 0 white, -1px 1px 0 white, 0 1px 0 white, 1px 0 0 darkgrey,
      1px -1px 0 darkgrey, 0 -1px 0 darkgrey, 1px 1px 0 white, -1px -1px darkgrey
    & > input[type="range"]::-moz-range-track
      border-left 1px solid grey
      border-right 0
      border-bottom 1px solid grey
      box-shadow -1px 0 0 white, -1px 1px 0 white, 0 1px 0 white, 1px 0 0 darkgrey,
      1px -1px 0 darkgrey, 0 -1px 0 darkgrey, 1px 1px 0 white, -1px -1px darkgrey
    & > input[type="range"]::-webkit-slider-thumb
      transform translateY(-8px) scaleX(-1)
    & > input[type="range"].has-box-indicator
      &::-webkit-slider-thumb
        transform translateY(-10px) scaleX(-1)
      &::-moz-range-thumb
        transform translateY(0px) scaleX(-1)
    & > input[type="range"]::-moz-range-thumb
      transform translateY(2px) scaleX(-1)

  a
    color var(--link-blue)
    &:focus
      outline 1px dotted var(--link-blue)

  // Sidebar
  .tree-view,
  .sidebar > ul
    &.tree-view,
    &.sidebar-links
      display block
      background var(--button-highlight)
      box-shadow var(--border-field)
      padding 6px
      margin 0
      li
        list-style-type none
      a
        text-decoration none
        color #000
        &.active
          background-color var(--dialog-blue)
          color var(--button-highlight)
      ul
        margin-left 16px
        padding-left 16px
        border-left 1px dotted #808080
        & > li
          position relative
          &::before
            content ""
            display block
            position absolute
            left -16px
            top 14px
            width 12px
            border-bottom 1px dotted #808080
          &:last-child
            &::after
              content ""
              display block
              position absolute
              left -20px
              top 16px
              bottom 0px
              width 8px
              background var(--button-highlight)
        details
          & > summary
            &:before
              margin-left -22px
              position relative
              z-index 1
      details
        margin-top 0
        & > summary
          &:before
            text-align center
            display block
            float left
            content "+"
            border 1px solid #808080
            width 8px
            height 9px
            line-height 8px
            margin-right 5px
            padding-left 1px
            background-color #fff
      details[open]
        summary
          margin-bottom 0
        & > summary
          &:before
            content "-"

  ul.tree-view ul, .sidebar > ul.sidebar-links ul,
  ul.tree-view li, .sidebar > ul.sidebar-links li
    margin-top 3px

  pre
    display block
    background var(--button-highlight)
    box-shadow var(--border-field)
    padding 12px 8px
    margin 0

  summary
    &:focus
      outline 1px dotted #000000

  // Tabs
  .window[role=tabpanel] {
    position: relative;
    z-index: 2;
  }

  menu[role=tablist] {
    position: relative;
    margin: 0 0 -2px 0;
    text-indent: 0;
    list-style-type: none;
    display: flex;
    padding-left: 3px;
  }

  menu[role=tablist] > li {
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
    box-shadow: var(--border-tab);
    z-index: 1;
  }

  menu[role=tablist] > li[aria-selected=true] {
    padding-bottom: 2px;
    margin-top: -2px;
    background-color: var(--surface);
    position: relative;
    z-index: 8;
    margin-left: -3px;
  }

  menu[role=tablist] > li > a {
    display: block;
    color: #222;
    margin: 6px;
    text-decoration: none;
  }
  menu[role=tablist] > li[aria-selected=true] > a:focus {
    outline: none;
  }
  menu[role=tablist] > li > a:focus {
    outline: 1px dotted #222;
  }

  menu[role=tablist].multirows > li {
    flex-grow: 1;
    text-align: center;
  }

::-webkit-scrollbar
  width 16px
  &:horizontal
    height 17px

::-webkit-scrollbar-corner
  background var(--button-face)

::-webkit-scrollbar-track
  background-image url("/icon/scrollbar-background.svg")

::-webkit-scrollbar-thumb
  background-color var(--button-face)
  box-shadow var(--border-raised-outer), var(--border-raised-inner)

::-webkit-scrollbar-button:horizontal:start:decrement,
::-webkit-scrollbar-button:horizontal:end:increment,
::-webkit-scrollbar-button:vertical:start:decrement,
::-webkit-scrollbar-button:vertical:end:increment
  display block

::-webkit-scrollbar-button
  &:vertical
    &:start
      height 17px
      background-image url("/icon/button-up.svg")
    &:end
      height 17px
      background-image url("/icon/button-down.svg")
  &:horizontal
    &:start
      width 16px
      background-image url("/icon/button-left.svg")
    &:end
      width 16px
      background-image url("/icon/button-right.svg")